<?xml version="1.0"?>
<implementation>
    <settings>
        <protocol>cr</protocol>
    </settings>
    <files>L_PioneerAV1.lua</files>
    <incoming>
      <lua>Pioneer_incoming(lul_data)</lua>
    </incoming>
    <startup>PioneerAVStartup</startup>
    <actionList>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>On</name>
            <run>sendCommand("PO")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>Off</name>
            <run>sendCommand("PF")</run>
        </action>
        <action>
            <serviceId>urn:upnp-org:serviceId:SwitchPower1</serviceId>
            <name>GetTarget</name>
            <run>
                sendCommand("?P")
                luup.sleep(1000)
                local target = luup.variable_get(Switch_SID, "Target", lul_device)
            </run>
        </action>
        <action>
            <serviceId>urn:upnp-org:serviceId:SwitchPower1</serviceId>
            <name>SetTarget</name>
            <run>
                local value = tostring(lul_settings.newTargetValue)
                local valueP = ""
                local powerStatus = luup.variable_get(Switch_SID, "Target", lul_device)
                    if (value == "1") then
                        code = "PO"
                    else
                        code = "PF"
                    end
                sendCommand(code)
            </run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>VolumeUp</name>
            <run>sendCommand("VU")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>VolumeDown</name>
            <run>sendCommand("VD")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>UnMute</name>
            <run>sendCommand("MF")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>Mute</name>
            <run>sendCommand("MO")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>ToggleMute</name>
            <run>
                local valueM = luup.variable_get(Pioneer_SID,"muteStatus", lul_device)
                local value = ""
                    if(valueM == "Off") then
                        code = "MO"
                    else
                        code = "MF"
                    end
                sendCommand(code)
            </run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>SetVolumeTarget</name>
            <run>setVolume(tonumber(lul_settings.newTargetValue))</run>
        </action>
        <action>
            <serviceId>urn:upnp-org:serviceId:RenderingControl1</serviceId>
            <name>SetVolume</name>
            <run>setVolume(tonumber(lul_settings.DesiredVolume))</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inDVD</name>
            <run>sendCommand("04FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inBD</name>
            <run>sendCommand("25FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inTVSAT</name>
            <run>sendCommand("05FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inSATCBL</name>
            <run>sendCommand("06FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inDVRBDR</name>
            <run>sendCommand("15FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inVideo1</name>
            <run>sendCommand("10FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inVideo2</name>
            <run>sendCommand("14FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inHDMI1</name>
            <run>sendCommand("19FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inHDMI2</name>
            <run>sendCommand("20FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inHDMI3</name>
            <run>sendCommand("21FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inHDMI4</name>
            <run>sendCommand("22FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inHDMI5</name>
            <run>sendCommand("23FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inInternet</name>
            <run>sendCommand("26FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inIpodUSB</name>
            <run>sendCommand("17FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inXMRadio</name>
            <run>sendCommand("18FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inCD</name>
            <run>sendCommand("01FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inCDRTape</name>
            <run>sendCommand("03FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inTuner</name>
            <run>sendCommand("02FN")</run>
        </action>
        <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>inPhono</name>
            <run>sendCommand("00FN")</run>
        </action>
	      <action>
            <serviceId>urn:shward1-com:serviceId:PioneerNavigation1</serviceId>
            <name>Reconnect</name>
            <run>Connect(lul_device)</run>
        </action>
    </actionList>
</implementation>
